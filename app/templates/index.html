  {% extends "base.html" %}
    
    <!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->
    
    {% set title = 'ScraperWiki MOT Vehicle Fault Search' %}

    <!-- Bootstrap -->
    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
    <style>
    
    div.col-md-4 {
    position: absolute;
    left: 570px;
    top: 300px;
    z-index: -1;
    }

    #topic {    
    text-align: center;
    }

    #demo {
    position:relative;
    top:20px;
    left:400px;
    }

    </style>

    {% block content %}
    <script>
      //var $SCRIPT_ROOT = {{ request.script_root|tojson|safe }};
      global_cars = {};
      $.getJSON( "/static/MakesAndModels.json", function( cars ){
        global_cars = cars;
        options = '';
        var keys = Object.keys(cars);
        keys.sort();
        $.each(keys, function(index, value){options += '<option value="'+ value +'">' + value + '</option>';})
        $("#make").html(options);
      })

      function getModel()
      {
        options = "";
        var e = document.getElementById("make");
        var makeText = e.options[e.selectedIndex].text;
        var model_keys = global_cars[makeText];
        model_keys.sort();
        $.each(model_keys, function(index, value){options += '<option value="'+ value +'">' + value + '</option>';})      
        $("#model").html(options);        
      }    

      function blink() {
        var blinks = document.getElementsByTagName('blink');
        for (var i = blinks.length - 1; i >= 0; i--) {
          var s = blinks[i];
          s.style.visibility = (s.style.visibility === 'visible') ? 'hidden' : 'visible';
          s.style.color = "#FF6600";
        }
        window.setTimeout(blink, 1000);
      }

      if (document.addEventListener) document.addEventListener("DOMContentLoaded", blink, false);
      else if (window.addEventListener) window.addEventListener("load", blink, false);
      else if (window.attachEvent) window.attachEvent("onload", blink);
      else window.onload = blink;

    </script>  
  
    <form method="POST">
    <fieldset>

    <!-- Form Name -->
    <legend id="topic" class="text-center">
      <h3>MOT Vehicle <strong>Top Fault</strong> Search<br>
      Brought to You by <blink>ScraperWiki</blink></h3>
    </legend>

    <!-- Car Make Selection -->
    <div class="control-group">
      <label id="maketext"class="control-label" for="car-make-input" style="font-size:20px">What's the <b>Make</b> of the Vehicle You Want to Know About?</label>
      <div class="controls">
        <div class="input-append">
          <!--<input id="car-make-input" name="car-make-input" class="input-xlarge" placeholder="e.g. Ford" type="text" required="">-->
          <div class="btn-group">
            <select id="make" class="selectbasic" onchange="getModel()" name="make"></select>
          </div>
        </div>
      </div>
    </div>

    <!-- Car Model Selection -->
    <div class="control-group">
      <label class="control-label" for="car-model-input" style="font-size:20px">What <b>Model</b>?</label>
      <div class="controls">
        <div class="input-append">
          <!--<input id="car-make-input" name="car-make-input" class="input-xlarge" placeholder="e.g. Fiesta" type="text" required="">-->
          <div class="btn-group">
            <select id="model" class="selectbasic" name="model"></select>
          </div>
        </div>
      </div>
    </div>

    <!-- Search Button -->
    <div class="form-group">
      <label class="col-md-4 control-label" for="submit-button"></label>
      <div class="col-md-4">
        <input id="submit-button" name="submit-button" class="btn btn-primary" type="submit" value="Display Top Faults"></input>
      </div>
    </div>

    </fieldset>
    </form>

{% endblock %}
